<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PDF Compressor</title>
  <link rel="stylesheet" href="../../css/styles.css" />
  <link rel="icon" href="../../assets/icons/app-logo.svg" type="image/svg+xml" />
</head>
<body data-root="../.." data-page="tool">
  <header class="app-bar" role="banner">
    <div class="app-bar__content">
      <div class="app-bar__left">
        <button id="backToDashboard" class="icon-btn back-btn" aria-label="Back to dashboard" title="Back to dashboard" data-ripple>
          <span class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
          </span>
        </button>
        <img src="../../assets/icons/app-logo.svg" class="app-logo" alt="Intranet Tools logo" />
        <div class="app-brand">
          <span class="app-title">Intranet Tools</span>
          <span class="app-subtitle">Creative suite for secure teams</span>
        </div>
      </div>
      <div class="app-bar__right">
        <button id="themeToggle" class="icon-btn" aria-label="Toggle light or dark theme" title="Toggle theme" data-ripple>
          <span class="icon" id="themeIcon" aria-hidden="true"></span>
        </button>
      </div>
    </div>
  </header>

  <div class="global-notice notice-bar notice-bar--important" role="note" aria-live="polite">
    <div class="notice-bar__icon" aria-hidden="true">⚠️</div>
    <p class="global-notice__text">Important Notice: This tool is provided as is without warranty or support. Please do not contact the ICT service desk—no support will be offered.</p>
  </div>

  <section class="tool-lede" data-tool-lede data-tool-id="pdf-compressor"></section>


  <main class="tool-main" role="main">
    <section class="tool-section" aria-labelledby="overview-title" id="panel-overview">
      <h2 id="overview-title">How to use this tool</h2>
      <p class="meta">This workflow trims PDFs for easy sharing while staying on your computer. Follow the three steps below.</p>
      <ol class="steps">
        <li><strong>Step 1:</strong> Add the PDF you want to shrink.</li>
        <li><strong>Step 2:</strong> Decide whether you need an everyday copy or the National Archives (NAA) archival standard.</li>
        <li><strong>Step 3:</strong> Download the lighter file once processing finishes.</li>
      </ol>
      <br>
      <div class="callout" role="note">
        <strong>About the National Archives Act (NAA):</strong> This Australian law makes sure government records are preserved and easy to find for future generations. Choosing the NAA archival option automatically applies the preservation settings that meet these obligations.
      </div>
    </section>

    <section class="tool-section" aria-labelledby="upload-title" id="panel-upload">
      <h2 id="upload-title">Step 1 – Select a PDF</h2>
      <p class="meta">Pick any PDF version 1.2–2.0. Everything stays in the browser – no files are uploaded.</p>
      <div id="dropzone" class="dropzone" tabindex="0">
        <p>Drag &amp; drop a PDF here, or</p>
        <button id="chooseFileBtn" class="btn" type="button" data-ripple>Choose file</button>
        <input id="fileInput" type="file" accept="application/pdf" hidden />
      </div>
    </section>

    <section class="tool-section" aria-labelledby="settings-title" id="panel-settings" hidden>
      <h2 id="settings-title">Step 2 – Pick the output</h2>
      <p class="meta" id="inputMeta"></p>
      <div class="settings-layout">
        <fieldset class="field field--output">
          <legend>Output format</legend>
          <div class="meta">Use an access copy for day-to-day collaboration. Choose archival for the National Archives standard, or custom to fine-tune every setting.</div>
          <div class="output-options" role="list">
            <label class="option-card" role="listitem">
              <input type="radio" name="outputType" value="access" checked />
              <span class="option-card__content">
                <span class="option-card__title">Access copy</span>
                <span class="option-card__description">Balanced for everyday sharing. Applies recommended resolution and quality automatically.</span>
              </span>
            </label>
            <label class="option-card" role="listitem">
              <input type="radio" name="outputType" value="custom" />
              <span class="option-card__content">
                <span class="option-card__title">Custom</span>
                <span class="option-card__description">Take full control of DPI, JPEG quality and page resizing for unique situations.</span>
              </span>
            </label>
            <label class="option-card" role="listitem">
              <input type="radio" name="outputType" value="pdfa" />
              <span class="option-card__content">
                <span class="option-card__title">Archival copy (PDF/A-2b)</span>
                <span class="option-card__description">Meets National Archives requirements. Locks preservation friendly settings and embeds metadata.</span>
              </span>
            </label>
          </div>
        </fieldset>
        <div class="field-group">
          <div class="field">
            <label for="dpi">Rasterisation DPI</label>
            <input id="dpi" type="range" min="72" max="300" step="6" value="150" />
            <div class="meta">Current: <span id="dpiLabel">150</span> dpi. Higher numbers are sharper but larger.</div>
          </div>
          <div class="field">
            <label for="quality">JPEG quality</label>
            <input id="quality" type="range" min="60" max="100" step="5" value="85" />
            <div class="meta">Current: <span id="qualityLabel">85</span>. Higher values keep more detail at the cost of a bigger file.</div>
          </div>
          <div class="field">
            <label for="downscale">Max long edge (pixels)</label>
            <input id="downscale" class="input" type="number" min="1000" max="6000" value="3500" />
            <div class="meta">Optional. Pages larger than this will be proportionally reduced before encoding.</div>
          </div>
        </div>
      </div>
      <p class="meta" id="qualityNotice">Adjust DPI, JPEG quality and maximum page size to balance clarity and size for everyday use.</p>
      <div class="actions">
        <button id="generateBtn" class="btn" data-ripple>Generate output</button>
        <button class="btn btn--secondary" type="button" id="startOverFromSettings" data-ripple>Start over</button>
      </div>
    </section>

    <section class="tool-section" aria-labelledby="progress-title" id="panel-progress" hidden>
      <h2 id="progress-title">Step 3 – Processing</h2>
      <p class="meta" id="progressStatus" role="status">Waiting…</p>
      <div class="progress" aria-hidden="true"><div class="progress__bar" id="progressBar"></div></div>
      <div class="actions actions--inline" id="progressActions" hidden>
        <button class="btn btn--secondary" type="button" id="startOverFromProgress" data-ripple>Start over</button>
      </div>
    </section>

    <div id="errorBanner" class="error-banner" role="alert" aria-hidden="true"></div>

    <section class="tool-section" aria-labelledby="results-title" id="panel-results" hidden>
      <h2 id="results-title">Step 4 – Download</h2>
      <div class="results">
        <div class="stats" id="stats"></div>
        <div class="actions">
          <button id="downloadBtn" class="btn" data-ripple disabled>Download</button>
          <button id="resetBtn" class="btn btn--secondary" data-ripple>Start over</button>
        </div>
        <p class="hint">Behind the scenes the file keeps the ZIP and JPEG formats recommended by our records team. Text recognition (OCR) is not added.</p>
      </div>
    </section>
  </main>

  <script src="../../js/tool-data.js"></script>
  <script src="../../js/app.js"></script>
  <script src="./lib/pdf.min.js"></script>
  <script src="./lib/pdf-lib.min.js"></script>
  <script src="./pdf-compressor.js"></script>
</body>
</html>
